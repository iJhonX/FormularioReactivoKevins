<div class="container">
  <!-- IZQUIERDA: Formulario -->
  <div class="form-panel">
    <h2>Formulario</h2>
    
    <form [formGroup]="form" (ngSubmit)="enviarFormulario()">
      <div class="form-group">
        <label>Título:</label>
        <input type="text" formControlName="titulo" placeholder="Escribe el título">
      </div>
      
      <div class="form-group">
        <label>Descripción:</label>
        <textarea formControlName="descripcion" rows="6" placeholder="Escribe la descripción"></textarea>
      </div>
      
      <div class="form-group">
        <label>Link actual:</label>
        <input type="text" formControlName="linkActual" readonly placeholder="Navega por Kevins para capturar">
      </div>
      
      <div class="mensaje-estado" *ngIf="mensajeEnvio">{{ mensajeEnvio }}</div>
      
      <div class="form-actions">
        <button type="submit" class="btn-enviar">Enviar</button>
        <button type="button" class="btn-exportar" (click)="exportarJson()">Exportar JSON</button>
      </div>
    </form>
  </div>

  <!-- DERECHA: Iframe -->
  <div class="iframe-panel">
    
    <div class="iframe-header">
      <!-- Link Dinámico -->
      <ng-container *ngIf="form.get('linkActual')?.value as link; else linkDefault">
        <a class="iframe-link-dinamico"
           [href]="link"
           target="_blank"
           rel="noopener noreferrer"
           [title]="link">
           {{ link }}
        </a>
      </ng-container>

      <!-- Texto Default -->
      <ng-template #linkDefault>
        <span class="iframe-link-dinamico">kevins.com.co</span>
      </ng-template>

    </div>
    
    <div class="iframe-container" #iframeContainer>
      <iframe #miIframe [src]="iframeSafeUrl" frameborder="0" allowfullscreen></iframe>
      
      <div class="loading-overlay" *ngIf="!iframeLoaded">
        <div class="spinner"></div>
        <p>Conectando...</p>
      </div>
    </div>
  </div>
</div>